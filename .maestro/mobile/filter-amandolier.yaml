appId: com.rohanodwyer.tpgtimes
---
- launchApp:
    label: "Launch TPG Times mobile app"
# Setup: Navigate to Amandolier stop
- tapOn:
    id: "search-input"
    label: "Tap on search input field"
- inputText:
    text: "GENÃˆVE, Amandolier"
    label: "Type Amandolier stop name"
- tapOn:
    id: "stop-suggestion-8592778"
    label: "Select Amandolier stop from suggestions"
- waitForAnimationToEnd:
    timeout: 2000
    label: "Wait for navigation to stop page"
# Apply vehicle filter for Bus 11
- tapOn:
    id: "vehicle-filter-input"
    label: "Tap vehicle filter input field"
- inputText: 
    text: "11"
    label: "Type bus line 11 to filter"
- tapOn:
    id: "add-vehicle-filter-button"
    label: "Apply vehicle filter"
- waitForAnimationToEnd:
    timeout: 1000
    label: "Wait for filter to apply"
# Verify only Bus 11 departure card is visible - all other departure cards should be filtered out
- assertVisible:
    id: "departure-card-bus-11"
    label: "Verify Bus 11 departure card is visible"
# Check that no other departure cards matching pattern departure-card-(Tram|Bus)-{1,3} are visible
- assertNotVisible:
    id: 'departure-card-(Tram|Bus)-(?!11$)\d{1,3}'
    label: "Verify no other departure cards are visible (filter working)"